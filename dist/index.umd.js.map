{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["type AudioState = {\n    isPlaying: boolean;\n    isLooping: boolean;\n    currentTime: number;\n    duration: number;\n    volume: number;\n  };\n  \n  class AudioManager {\n    private audio: HTMLAudioElement;\n    private playlist: string[];\n    private currentTrackIndex: number;\n    private state: AudioState;\n    private shuffle: boolean;\n  \n    constructor(src: string | string[]) {\n      this.playlist = Array.isArray(src) ? src : [src];\n      this.currentTrackIndex = 0;\n      this.audio = new Audio(this.playlist[this.currentTrackIndex]);\n      this.state = {\n        isPlaying: false,\n        isLooping: false,\n        currentTime: 0,\n        duration: this.audio.duration,\n        volume: 1\n      };\n      this.shuffle = false;\n  \n      // Event handling for various audio events\n      this.audio.addEventListener('loadeddata', () => this.updateState());\n      this.audio.addEventListener('timeupdate', () => this.updateState());\n      this.audio.addEventListener('ended', () => this.handleTrackEnd());\n      this.audio.addEventListener('error', (e) => console.error('Audio error:', e));\n    }\n  \n    play(): void {\n      this.audio.play();\n      this.state.isPlaying = true;\n    }\n  \n    pause(): void {\n      this.audio.pause();\n      this.state.isPlaying = false;\n    }\n  \n    stop(): void {\n      this.audio.pause();\n      this.audio.currentTime = 0;\n      this.state.isPlaying = false;\n    }\n  \n    seek(time: number): void {\n      this.audio.currentTime = time;\n      this.state.currentTime = time;\n    }\n  \n    setVolume(volume: number): void {\n      this.audio.volume = volume;\n      this.state.volume = volume;\n    }\n  \n    setLoop(loop: boolean): void {\n      this.audio.loop = loop;\n      this.state.isLooping = loop;\n    }\n  \n    toggleShuffle(): void {\n      this.shuffle = !this.shuffle;\n    }\n  \n    nextTrack(): void {\n      if (this.shuffle) {\n        this.currentTrackIndex = Math.floor(Math.random() * this.playlist.length);\n      } else {\n        this.currentTrackIndex = (this.currentTrackIndex + 1) % this.playlist.length;\n      }\n      this.changeTrack();\n    }\n  \n    previousTrack(): void {\n      if (this.shuffle) {\n        this.currentTrackIndex = Math.floor(Math.random() * this.playlist.length);\n      } else {\n        this.currentTrackIndex = (this.currentTrackIndex - 1 + this.playlist.length) % this.playlist.length;\n      }\n      this.changeTrack();\n    }\n  \n    changeTrack(): void {\n      this.audio.src = this.playlist[this.currentTrackIndex];\n      this.audio.load();\n      this.play();\n    }\n  \n    on(event: string, handler: () => void): void {\n      this.audio.addEventListener(event, handler);\n    }\n  \n    off(event: string, handler: () => void): void {\n      this.audio.removeEventListener(event, handler);\n    }\n  \n    private updateState(): void {\n      this.state.currentTime = this.audio.currentTime;\n      this.state.duration = this.audio.duration;\n    }\n  \n    private handleTrackEnd(): void {\n      if (this.state.isLooping) {\n        this.play();\n      } else {\n        this.nextTrack();\n      }\n    }\n  \n    getCurrentTime(): number {\n      return this.audio.currentTime;\n    }\n  \n    getDuration(): number {\n      return this.audio.duration;\n    }\n  \n    getState(): AudioState {\n      return this.state;\n    }\n  }\n  \n  export default AudioManager;"],"names":[],"mappings":"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"}