{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["type AudioState = {\n    isPlaying: boolean;\n    isLooping: boolean;\n    currentTime: number;\n    duration: number;\n    volume: number;\n  };\n  \n  class AudioManager {\n    private audio: HTMLAudioElement;\n    private playlist: string[];\n    private currentTrackIndex: number;\n    private state: AudioState;\n    private shuffle: boolean;\n  \n    constructor(src: string | string[]) {\n      this.playlist = Array.isArray(src) ? src : [src];\n      this.currentTrackIndex = 0;\n      this.audio = new Audio(this.playlist[this.currentTrackIndex]);\n      this.state = {\n        isPlaying: false,\n        isLooping: false,\n        currentTime: 0,\n        duration: this.audio.duration,\n        volume: 1\n      };\n      this.shuffle = false;\n  \n      // Event handling for various audio events\n      this.audio.addEventListener('loadeddata', () => this.updateState());\n      this.audio.addEventListener('timeupdate', () => this.updateState());\n      this.audio.addEventListener('ended', () => this.handleTrackEnd());\n      this.audio.addEventListener('error', (e) => console.error('Audio error:', e));\n    }\n  \n    play(): void {\n      this.audio.play();\n      this.state.isPlaying = true;\n    }\n  \n    pause(): void {\n      this.audio.pause();\n      this.state.isPlaying = false;\n    }\n  \n    stop(): void {\n      this.audio.pause();\n      this.audio.currentTime = 0;\n      this.state.isPlaying = false;\n    }\n  \n    seek(time: number): void {\n      this.audio.currentTime = time;\n      this.state.currentTime = time;\n    }\n  \n    setVolume(volume: number): void {\n      this.audio.volume = volume;\n      this.state.volume = volume;\n    }\n  \n    setLoop(loop: boolean): void {\n      this.audio.loop = loop;\n      this.state.isLooping = loop;\n    }\n  \n    toggleShuffle(): void {\n      this.shuffle = !this.shuffle;\n    }\n  \n    nextTrack(): void {\n      if (this.shuffle) {\n        this.currentTrackIndex = Math.floor(Math.random() * this.playlist.length);\n      } else {\n        this.currentTrackIndex = (this.currentTrackIndex + 1) % this.playlist.length;\n      }\n      this.changeTrack();\n    }\n  \n    previousTrack(): void {\n      if (this.shuffle) {\n        this.currentTrackIndex = Math.floor(Math.random() * this.playlist.length);\n      } else {\n        this.currentTrackIndex = (this.currentTrackIndex - 1 + this.playlist.length) % this.playlist.length;\n      }\n      this.changeTrack();\n    }\n  \n    changeTrack(): void {\n      this.audio.src = this.playlist[this.currentTrackIndex];\n      this.audio.load();\n      this.play();\n    }\n  \n    on(event: string, handler: () => void): void {\n      this.audio.addEventListener(event, handler);\n    }\n  \n    off(event: string, handler: () => void): void {\n      this.audio.removeEventListener(event, handler);\n    }\n  \n    private updateState(): void {\n      this.state.currentTime = this.audio.currentTime;\n      this.state.duration = this.audio.duration;\n    }\n  \n    private handleTrackEnd(): void {\n      if (this.state.isLooping) {\n        this.play();\n      } else {\n        this.nextTrack();\n      }\n    }\n  \n    getCurrentTime(): number {\n      return this.audio.currentTime;\n    }\n  \n    getDuration(): number {\n      return this.audio.duration;\n    }\n  \n    getState(): AudioState {\n      return this.state;\n    }\n  }\n  \n  export default AudioManager;"],"names":[],"mappings":"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"}